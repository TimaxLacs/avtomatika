# ะขะตัั 09: Git ัะตะถะธะผ

## ะกัะฐััั: โ ะะะะะะะ

**ะะฐัะฐ:** 2026-01-19

## ะะฟะธัะฐะฝะธะต
ะัะพะฒะตัะบะฐ ะฒะพะทะผะพะถะฝะพััะธ ัะฐะทะฒััััะฒะฐะฝะธั ะฑะพัะฐ ะธะท Git ัะตะฟะพะทะธัะพัะธั.

## ะะตะฟะพะทะธัะพัะธะน ะดะปั ัะตััะฐ
https://github.com/deep-assistant/telegram-bot

ะญัะพ ัะปะพะถะฝัะน ัะตะฟะพะทะธัะพัะธะน ั:
- ะะตัะบะพะปัะบะธะผะธ ัะฐะนะปะฐะผะธ ะธ ะผะพะดัะปัะผะธ
- requirements.txt
- ะกะพะฑััะฒะตะฝะฝัะผ entrypoint (`__main__.py`)
- ะะฝะพะถะตััะฒะพะผ ะบะพะฝัะธะณััะฐัะธะพะฝะฝัั ะฟะตัะตะผะตะฝะฝัั

## ะจะฐะณะธ
1. ะะฐะฟััะบ ะฑะพัะฐ ั `--git` ะฟะฐัะฐะผะตััะพะผ
2. ะัะพะฒะตัะบะฐ ััะพ ะบะพะฝัะตะนะฝะตั ัะพะทะดะฐะฝ ะธ ะทะฐะฟััะตะฝ
3. ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ

## ะัะฟัะฐะฒะปะตะฝะฝัะน ะฑะฐะณ

ะัะธ ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะผ ัะตััะธัะพะฒะฐะฝะธะธ ะฑัะปะฐ ะพะฑะฝะฐััะถะตะฝะฐ ะพัะธะฑะบะฐ:
```
TypeError: unsupported operand type(s) for +: 'int' and 'str'
```

**ะัะธัะธะฝะฐ:** ะ `bot_runner_validator.py` ัััะพะบะฐ 312:
```python
if sum(sources) > 1:
```

ะะดะต `sources = [has_archive, has_archive_url, has_git_repo]`, ะธ `has_git_repo` ะฑัะป **ัััะพะบะพะน** (URL), ะฐ ะฝะต `bool`.

**ะัะฟัะฐะฒะปะตะฝะธะต:**
```python
# ะัะปะพ:
has_git_repo = "git_repo" in data and data["git_repo"]

# ะกัะฐะปะพ:
has_git_repo = bool(data.get("git_repo"))
```

## ะะตะทัะปััะฐัั

```bash
avtomatika-bot start git-fixed-test \
  --git https://github.com/deep-assistant/telegram-bot \
  --entrypoint "__main__.py" \
  -e "TOKEN=$BOT_TOKEN" \
  -e "IS_DEV=True" \
  -e "WEBHOOK_ENABLED=False" \
  -e "ANALYTICS_URL=https://example.com" \
  ...

๐ฆ ะััะพัะฝะธะบ: Git ัะตะฟะพะทะธัะพัะธะน
๐ ะะฐะฟััะบ ะฑะพัะฐ 'git-fixed-test'...
Job ID: 8d0c8468-e4d0-4d44-b24b-bcfb45d9d362
โญโโ โ ะฃัะฟะตั โโโฎ
โ ะะพั 'git-fixed-test' ััะฟะตัะฝะพ ะทะฐะฟััะตะฝ! โ
โฐโโโโโโโโโโโโโโโฏ
```

**ะกัะฐััั ะบะพะฝัะตะนะฝะตัะฐ:**
```
๐ ะกัะฐััั ะฑะพัะฐ 'git-fixed-test'
โญโโโโโโโโโ ะะพั: git-fixed-test โโโโโโโโโโฎ
โ ๐ข RUNNING                            โ
โ โข Container: bot_cli_..._git-fixed-testโ
โ โข Started: 2026-01-19T17:53:31         โ
โฐโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฏ
```

**ะะพะณะธ ะฑะพัะฐ:**
```
[Entrypoint] Starting Telegram Bot...
[Entrypoint] Database file exists: 12K
[Entrypoint] Configuration:
  - PROXY_URL: https://example.com
  - IS_DEV: True
  - Bot Token: 8466887146...Bj9kw
  - DB Path: /app/data/data_base.db
[Entrypoint] Starting application...
```

## ะัะธะผะตัะฐะฝะธะต
ะะตะฟะพะทะธัะพัะธะน deep-assistant/telegram-bot ะพะถะธะดะฐะตั ะฟะตัะตะผะตะฝะฝัั `TELEGRAM_TOKEN`, ะฐ ะฝะต `TOKEN`. 
ะญัะพ ะพัะพะฑะตะฝะฝะพััั ะบะพะฝะบัะตัะฝะพะณะพ ัะตะฟะพะทะธัะพัะธั, ะฐ ะฝะต ะฑะฐะณ ัะธััะตะผั.

## ะงัะพ ะฟัะพะฒะตััะปะพัั
- โ Git ัะตะฟะพะทะธัะพัะธะน ะบะปะพะฝะธััะตััั
- โ Docker ะพะฑัะฐะท ัะพะฑะธัะฐะตััั
- โ ะะพะฝัะตะนะฝะตั ะทะฐะฟััะบะฐะตััั
- โ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฟะตัะตะดะฐัััั
- โ ะะพะณะธ ะดะพัััะฟะฝั ัะตัะตะท CLI
- โ ะะพั ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั ะบะพััะตะบัะฝะพ

## ะัะฒะพะดั
Git ัะตะถะธะผ ะฟะพะปะฝะพัััั ัะฐะฑะพัะฐะตั. ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั:
1. ะฃะบะฐะทะฐัั URL ะฟัะฑะปะธัะฝะพะณะพ Git ัะตะฟะพะทะธัะพัะธั
2. ะะฟัะธะพะฝะฐะปัะฝะพ ัะบะฐะทะฐัั ะฒะตัะบั (`--branch`)
3. ะฃะบะฐะทะฐัั entrypoint ะตัะปะธ ะพะฝ ะพัะปะธัะฐะตััั ะพั `bot.py`
4. ะะตัะตะดะฐัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
