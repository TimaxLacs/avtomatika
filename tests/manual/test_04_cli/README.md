# Ğ¢ĞµÑÑ‚ 04: CLI â€” Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

## Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… PASSED

**Ğ”Ğ°Ñ‚Ğ°:** 2026-01-18

## ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ÑĞµÑ… CLI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:
- `start` â€” Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ±Ğ¾Ñ‚Ğ°
- `list` â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ±Ğ¾Ñ‚Ğ¾Ğ²
- `status` â€” ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¾Ñ‚Ğ°
- `logs` â€” Ğ»Ğ¾Ğ³Ğ¸ Ğ±Ğ¾Ñ‚Ğ°
- `stop` â€” Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ±Ğ¾Ñ‚Ğ°

---

## Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹

| ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ |
|---------|--------|------------------|
| `start` | âœ… | ~30 ÑĞµĞº (ÑĞ±Ğ¾Ñ€ĞºĞ° Docker) |
| `list` | âœ… | ~2 ÑĞµĞº |
| `status` | âœ… | ~2 ÑĞµĞº |
| `logs` | âœ… | ~2 ÑĞµĞº |
| `stop` | âœ… | ~2 ÑĞµĞº |

---

## 1. avtomatika-bot start âœ…

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:**
```bash
export AVTOMATIKA_TOKEN=test-client-token
export AVTOMATIKA_URL=http://localhost:8000

avtomatika-bot start prod-test-bot \
  --simple examples/bots/echo_bot.py \
  -r "aiogram>=3.0" \
  -e "BOT_TOKEN=$BOT_TOKEN"
```

**Ğ’Ñ‹Ğ²Ğ¾Ğ´ CLI:**
```
Ğ ĞµĞ¶Ğ¸Ğ¼: Ğ¾Ğ´Ğ¸Ğ½ Ñ„Ğ°Ğ¹Ğ» (examples/bots/echo_bot.py)
Requirements: 1 Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²

ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±Ğ¾Ñ‚Ğ° 'prod-test-bot'...

Job ID: 72a810c3-aaab-43f4-932c-9753ee980a43

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… Ğ£ÑĞ¿ĞµÑ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Ğ‘Ğ¾Ñ‚ 'prod-test-bot' ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½!                                         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

**Ğ›Ğ¾Ğ³Ğ¸ Worker:**
```
2026-01-18 07:03:36 - Starting bot: user=cli_26ace80c6eac526b, bot=prod-test-bot, mode=simple
2026-01-18 07:03:36 - Building image bot_image_cli_26ace80c6eac526b_prod-test-bot:latest
2026-01-18 07:03:37 - Successfully built image
2026-01-18 07:03:37 - Starting container bot_cli_26ace80c6eac526b_prod-test-bot
2026-01-18 07:03:37 - Container started with ID 48b1b77066d4f...
2026-01-18 07:03:37 - Bot started successfully
```

---

## 2. avtomatika-bot list âœ…

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:**
```bash
avtomatika-bot list
```

**Ğ’Ñ‹Ğ²Ğ¾Ğ´ CLI:**
```
ğŸ“‹ Ğ’Ğ°ÑˆĞ¸ Ğ±Ğ¾Ñ‚Ñ‹

Job ID: 6c5b24bf-beee-4b9a-a421-c0b3d1dbc7e5

                        Ğ‘Ğ¾Ñ‚Ñ‹ (1/3)                         
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Bot ID        â”ƒ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ     â”ƒ Ğ—Ğ°Ğ¿ÑƒÑ‰ĞµĞ½                    â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ prod-test-bot â”‚ ğŸŸ¢ running â”‚ 2026-01-18T04:03:37.102168 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. avtomatika-bot status âœ…

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:**
```bash
avtomatika-bot status prod-test-bot
```

**Ğ’Ñ‹Ğ²Ğ¾Ğ´ CLI:**
```
ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¾Ñ‚Ğ° 'prod-test-bot'

Job ID: 3b5450c7-5edb-4608-9643-cc90da5ce33d

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ‘Ğ¾Ñ‚: prod-test-bot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸŸ¢ RUNNING                                                                   â”‚
â”‚                                                                              â”‚
â”‚ â€¢ Container: bot_cli_26ace80c6eac526b_prod-test-bot                          â”‚
â”‚ â€¢ Started: 2026-01-18T04:03:37.102168                                        â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

---

## 4. avtomatika-bot logs âœ…

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:**
```bash
avtomatika-bot logs prod-test-bot --lines 5
```

**Ğ’Ñ‹Ğ²Ğ¾Ğ´ CLI:**
```
ğŸ“œ Ğ›Ğ¾Ğ³Ğ¸ Ğ±Ğ¾Ñ‚Ğ° 'prod-test-bot'

Job ID: 7925f03c-a889-49a4-b153-32960386cca8

Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°: ğŸŸ¢ running

2026-01-18T04:03:38.507650179Z 2026-01-18 04:03:38,507 - __main__ - INFO - 
Starting Echo Bot...
2026-01-18T04:03:38.817793305Z 2026-01-18 04:03:38,817 - aiogram.dispatcher - 
INFO - Start polling
2026-01-18T04:03:38.894911513Z 2026-01-18 04:03:38,894 - aiogram.dispatcher - 
INFO - Run polling for bot @testTimax_bot id=8466887146 - 'Testing Bot'
```

---

## 5. avtomatika-bot stop âœ…

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:**
```bash
avtomatika-bot stop prod-test-bot
```

**Ğ’Ñ‹Ğ²Ğ¾Ğ´ CLI:**
```
ğŸ›‘ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ±Ğ¾Ñ‚Ğ° 'prod-test-bot'...

Job ID: 3a478e03-ad00-49e4-aa5b-7781a4a7782c

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… Ğ£ÑĞ¿ĞµÑ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Ğ‘Ğ¾Ñ‚ 'prod-test-bot' Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½                                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾ÑĞ»Ğµ stop:**
```bash
avtomatika-bot list
# â†’ Ğ£ Ğ²Ğ°Ñ Ğ½ĞµÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ±Ğ¾Ñ‚Ğ¾Ğ²
# â†’ Ğ›Ğ¸Ğ¼Ğ¸Ñ‚: 0/3

docker ps --filter "label=bot_runner=true"
# â†’ (Ğ¿ÑƒÑÑ‚Ğ¾)
```

---

## ĞÑ‚Ğ²ĞµÑ‚Ñ‹ Ğ±Ğ¾Ñ‚Ğ° Ğ² Telegram

ĞŸÑ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ `/start`:
```
ğŸ‘‹ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, [Ğ˜Ğ¼Ñ]!

Ğ¯ Echo-Ğ±Ğ¾Ñ‚. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ Ğ¼Ğ½Ğµ Ğ»ÑĞ±Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, Ğ¸ Ñ ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ñ.

ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:
/start - Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ
/ping - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ²ÑĞ·Ğ¸
/info - Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ±Ğ¾Ñ‚Ğµ
```

ĞŸÑ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ `/ping`:
```
ğŸ“ Pong!
```

ĞŸÑ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞºÑÑ‚Ğ°:
```
ğŸ“¢ Ğ’Ñ‹ ÑĞºĞ°Ğ·Ğ°Ğ»Ğ¸:
[Ñ‚ĞµĞºÑÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ]
```

---

## Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ³Ğ¸

| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ |
|----------|-------------|
| CLI Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ» `state`, API Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ `current_state` | Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² `_wait_for_job()` |
| Ğ Ğ°Ğ·Ğ½Ñ‹Ğ¹ `user_id` Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ `user_id` Ğ¸Ğ· Ñ…ĞµÑˆĞ° Ñ‚Ğ¾ĞºĞµĞ½Ğ° |
| Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² `data.result` Ğ²Ğ¼ĞµÑÑ‚Ğ¾ `state_history` | Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· `state_history` |

---

## Docker Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ

**ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€:**
```
NAMES: bot_cli_26ace80c6eac526b_prod-test-bot
IMAGE: bot_image_cli_26ace80c6eac526b_prod-test-bot:latest
STATUS: Up X minutes
```

**Labels:**
```json
{
    "bot_id": "prod-test-bot",
    "bot_runner": "true",
    "user_id": "cli_26ace80c6eac526b",
    "started_at": "2026-01-18T04:03:37.102168"
}
```
